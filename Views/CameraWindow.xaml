<Window x:Class="SimpleDroneGCS.Views.CameraWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="KYRAN GCS - Camera Control" 
        Height="720" Width="1280"
        MinWidth="1024" MinHeight="600"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize"
        Closing="Window_Closing">

    <Window.Resources>
        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ ÐºÐ½Ð¾Ð¿Ð¾Ðº ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
        <Style x:Key="CameraButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#2A4361"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2A4361"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#98F019"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#98F019"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Ð¢Ñ‘Ð¼Ð½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ ÑÐ»Ð°Ð¹Ð´ÐµÑ€Ð¾Ð² Gimbal -->
        <Style x:Key="GimbalSliderStyle" TargetType="Slider">
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="#98F019"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Track x:Name="PART_Track" Grid.Row="1">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="Slider.DecreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="#98F019" Height="4" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>

                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="Slider.IncreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="#2A4361" Height="4" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>

                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Ellipse Width="14" Height="14" 
                                                 Fill="#98F019" 
                                                 Stroke="#0A1628" StrokeThickness="2"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Ð’ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»Ð°Ð¹Ð´ÐµÑ€ -->
        <Style x:Key="GimbalSliderVerticalStyle" TargetType="Slider">
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="#98F019"/>
            <Setter Property="Orientation" Value="Vertical"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto" MinWidth="{TemplateBinding MinWidth}"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Track x:Name="PART_Track" Grid.Column="1">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="Slider.DecreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="#2A4361" Width="4" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>

                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="Slider.IncreaseLarge">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="#98F019" Width="4" CornerRadius="2"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>

                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Ellipse Width="14" Height="14" 
                                                 Fill="#98F019" 
                                                 Stroke="#0A1628" StrokeThickness="2"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð¹ ÐºÐ½Ð¾Ð¿ÐºÐ¸ -->
        <Style x:Key="CameraButtonActiveStyle" TargetType="Button" BasedOn="{StaticResource CameraButtonStyle}">
            <Setter Property="Background" Value="#98F019"/>
            <Setter Property="Foreground" Value="#060B1A"/>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ñ… ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
        <Style x:Key="SmallButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#2A4361"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#2A4361"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#98F019"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Ð¢Ñ‘Ð¼Ð½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ ComboBox -->
        <Style x:Key="DarkComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2A4361"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <ToggleButton x:Name="ToggleButton"
                                          Background="{TemplateBinding Background}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="{TemplateBinding BorderThickness}"
                                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                          ClickMode="Press">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="4">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition Width="20"/>
                                                </Grid.ColumnDefinitions>
                                                <ContentPresenter Grid.Column="0"/>
                                                <Path Grid.Column="1" Data="M0,0 L4,4 L8,0" 
                                                      Fill="White" 
                                                      HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"/>
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>
                            <ContentPresenter x:Name="ContentSite"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              Margin="8,4,20,4"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left"
                                              IsHitTestVisible="False"/>
                            <Popup x:Name="Popup"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   AllowsTransparency="True"
                                   PopupAnimation="Slide"
                                   Placement="Bottom">
                                <Border x:Name="DropDownBorder"
                                        Background="#1A2744"
                                        BorderBrush="#2A4361"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        MinWidth="{TemplateBinding ActualWidth}"
                                        MaxHeight="250">
                                    <ScrollViewer>
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Ð¡Ñ‚Ð¸Ð»ÑŒ Ð´Ð»Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² ComboBox -->
        <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#1A2744"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border x:Name="Border" 
                                Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#2A4361"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#98F019"/>
                                <Setter Property="Foreground" Value="#060B1A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Background="#060B1A" CornerRadius="10" BorderThickness="1" BorderBrush="#1E3A5F">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="32"/>
                <RowDefinition Height="36"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="60"/>
            </Grid.RowDefinitions>

            <!-- ========== TITLE BAR ========== -->
            <Border Grid.Row="0" Background="#0A1628" CornerRadius="10,10,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Margin="10,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ“¹" FontSize="14" Margin="0,0,8,0"/>
                        <TextBlock Text="KYRAN GCS - Camera Control (Z30T)" 
                                   FontSize="12" FontWeight="SemiBold"
                                   Foreground="#98F019" VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Orientation="Horizontal">
                        <Button Content="â€”" Width="32" Height="24" Background="Transparent"
                                Foreground="#2A5A8F" BorderThickness="0" Click="MinimizeButton_Click"/>
                        <Button Content="â˜" Width="32" Height="24" Background="Transparent"
                                Foreground="#2A5A8F" BorderThickness="0" Click="MaximizeButton_Click"/>
                        <Button Content="âœ•" Width="32" Height="24" Background="Transparent"
                                Foreground="#EF4444" BorderThickness="0" Click="CloseButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ========== TOP TELEMETRY BAR ========== -->
            <Border Grid.Row="1" Background="#0D1220">
                <Grid Margin="15,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Vehicle Info -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Vehicle" Foreground="#4ADE80" FontSize="10" FontWeight="Bold" Margin="0,0,10,0"/>
                        <TextBlock Text="Lat:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="VehicleLatText" Text="0.000000" Foreground="White" FontSize="10" Margin="0,0,15,0"/>
                        <TextBlock Text="Alt:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="VehicleAltText" Text="0.0" Foreground="White" FontSize="10" Margin="0,0,15,0"/>
                        <TextBlock Text="Mode:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="VehicleModeText" Text="--" Foreground="White" FontSize="10" Margin="0,0,15,0"/>
                        <TextBlock Text="Heading:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="VehicleHeadingText" Text="0.0" Foreground="White" FontSize="10"/>
                    </StackPanel>

                    <!-- Target & Temperature -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Target" Foreground="#F59E0B" FontSize="10" FontWeight="Bold" Margin="0,0,10,0"/>
                        <TextBlock Text="Lat:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="TargetLatText" Text="0.000000" Foreground="White" FontSize="10" Margin="0,0,15,0"/>
                        <TextBlock Text="Alt:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="TargetAltText" Text="0.0" Foreground="White" FontSize="10" Margin="0,0,25,0"/>

                        <TextBlock Text="Tmax:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="TmaxText" Text="0.0Â°C" Foreground="#EF4444" FontSize="10" Margin="0,0,15,0"/>
                        <TextBlock Text="Tmin:" Foreground="#6B7280" FontSize="10" Margin="0,0,3,0"/>
                        <TextBlock x:Name="TminText" Text="0.0Â°C" Foreground="#3B82F6" FontSize="10"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ========== VIDEO AREA WITH HUD ========== -->
            <Grid Grid.Row="2" Background="#000000">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="60"/>
                    <!-- ÐÐ¾Ð²Ð°Ñ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ° Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="40"/>
                </Grid.RowDefinitions>

                <!-- RTSP Video Stream -->
                <Border x:Name="VideoContainer" Grid.Column="0" Grid.Row="0" Background="#0A0A0A">
                    <Grid>
                        <ContentControl x:Name="VideoViewHost" Background="Black"/>
                        <TextBlock x:Name="NoVideoText" 
                       Text="ðŸ“¹ ÐÐµÑ‚ Ð²Ð¸Ð´ÐµÐ¾ÑÐ¸Ð³Ð½Ð°Ð»Ð°&#x0a;RTSP: rtsp://192.168.144.68:554/chn0"
                       Foreground="#4B5563" FontSize="16" 
                       HorizontalAlignment="Center" VerticalAlignment="Center"
                       TextAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- HUD Overlay -->
                <Canvas x:Name="HudCanvas" Grid.Column="0" Grid.Row="0" IsHitTestVisible="False"/>

                <!-- PITCH SLIDER (Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹) -->
                <Grid Grid.Column="1" Grid.Row="0" Margin="0,5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="40"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="â–²&#x0a;UP" Foreground="#98F019" 
                   HorizontalAlignment="Center" TextAlignment="Center"
                   FontSize="10" FontWeight="Bold"/>

                    <Slider x:Name="PitchSlider" Grid.Row="1"
                Minimum="-100" Maximum="100" Value="0"
                Orientation="Vertical"
                HorizontalAlignment="Center"
                ValueChanged="PitchSlider_ValueChanged"/>

                    <TextBlock Grid.Row="2" Text="DOWN&#x0a;â–¼" Foreground="#98F019" 
                   HorizontalAlignment="Center" TextAlignment="Center"
                   FontSize="10" FontWeight="Bold"/>
                </Grid>

                <!-- RIGHT SIDE BUTTONS (Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ°) -->
                <Border Grid.Column="2" Grid.Row="0" Background="#0D1733">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Button x:Name="BtnOSD" Style="{StaticResource SmallButtonStyle}" 
                    Content="OSD" FontSize="9" FontWeight="Bold"
                    ToolTip="Toggle OSD" Click="BtnOSD_Click" Margin="0,3"/>
                        <Button x:Name="BtnFillLight" Style="{StaticResource SmallButtonStyle}" 
                    Content="ðŸ’¡" ToolTip="Fill Light" Click="BtnFillLight_Click" Margin="0,3"/>
                        <Button x:Name="BtnSnapshot" Style="{StaticResource SmallButtonStyle}" 
                    Content="ðŸ“·" ToolTip="Snapshot" Click="BtnSnapshot_Click" Margin="0,3"/>
                        <Button x:Name="BtnRecord" Style="{StaticResource SmallButtonStyle}" 
                    Content="âºï¸" ToolTip="Record" Click="BtnRecord_Click" Margin="0,3"/>
                        <Button x:Name="BtnLaser" Style="{StaticResource SmallButtonStyle}" 
                    Content="ðŸ”´" ToolTip="Laser" Click="BtnLaser_Click" Margin="0,3"/>
                        <Button x:Name="BtnTemp" Style="{StaticResource SmallButtonStyle}" 
                    Content="ðŸŒ¡ï¸" ToolTip="Measure Temp" Click="BtnTemp_Click" Margin="0,3"/>
                    </StackPanel>
                </Border>

                <!-- YAW SLIDER (Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹) -->
                <Grid Grid.Row="1" Grid.Column="0" Margin="5,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="60"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="â—€ LEFT" Foreground="#98F019" 
                   VerticalAlignment="Center" FontSize="10" FontWeight="Bold"/>

                    <Slider x:Name="YawSlider" Grid.Column="1"
                Minimum="-100" Maximum="100" Value="0"
                VerticalAlignment="Center"
                ValueChanged="YawSlider_ValueChanged"/>

                    <TextBlock Grid.Column="2" Text="RIGHT â–¶" Foreground="#98F019" 
                   VerticalAlignment="Center" HorizontalAlignment="Right" 
                   FontSize="10" FontWeight="Bold"/>
                </Grid>

                <!-- Ð£Ð³Ð¾Ð» ÑÐ¿Ñ€Ð°Ð²Ð° ÑÐ½Ð¸Ð·Ñƒ -->
                <Border Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" Background="#0D1733"/>

                <!-- Status Panel (Right Top) -->
                <Border Grid.Column="0" Grid.Row="0" Background="#80000000" CornerRadius="5" Padding="10,8"
            HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                            <TextBlock Text="MODE" Foreground="#6B7280" FontSize="10" Width="55"/>
                            <TextBlock x:Name="ModeStatusText" Text="FOLLOW" Foreground="#4ADE80" FontSize="10" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                            <TextBlock Text="TRACK" Foreground="#6B7280" FontSize="10" Width="55"/>
                            <TextBlock x:Name="TrackStatusText" Text="OFF" Foreground="#EF4444" FontSize="10" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                            <TextBlock Text="DETECT" Foreground="#6B7280" FontSize="10" Width="55"/>
                            <TextBlock x:Name="DetectStatusText" Text="OFF" Foreground="#EF4444" FontSize="10" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                            <TextBlock Text="IR ZOOM" Foreground="#6B7280" FontSize="10" Width="55"/>
                            <TextBlock x:Name="IrZoomText" Text="1.0" Foreground="White" FontSize="10"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="RECORD" Foreground="#6B7280" FontSize="10" Width="55"/>
                            <TextBlock x:Name="RecordStatusText" Text="OFF" Foreground="#EF4444" FontSize="10" FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Gimbal Position (Left Side) -->
                <Border Grid.Column="0" Grid.Row="0" Background="#80000000" CornerRadius="5" Padding="8"
            HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10">
                    <StackPanel>
                        <TextBlock Text="GIMBAL" Foreground="#98F019" FontSize="9" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,0,0,5"/>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <TextBlock Text="P" Foreground="#6B7280" FontSize="10" Width="15"/>
                            <TextBlock x:Name="GimbalPitchText" Text="0Â°" Foreground="White" FontSize="10"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <TextBlock Text="Y" Foreground="#6B7280" FontSize="10" Width="15"/>
                            <TextBlock x:Name="GimbalYawText" Text="0Â°" Foreground="White" FontSize="10"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,2">
                            <TextBlock Text="Z" Foreground="#6B7280" FontSize="10" Width="15"/>
                            <TextBlock x:Name="GimbalZoomText" Text="1.0x" Foreground="White" FontSize="10"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Connection Status -->
                <Border Grid.Column="0" Grid.Row="0" Background="#80000000" CornerRadius="5" Padding="8,4"
            HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="CameraConnectionIndicator" Width="8" Height="8" Fill="Red" Margin="0,0,6,0"/>
                        <TextBlock x:Name="CameraStatusText" Text="ÐšÐ°Ð¼ÐµÑ€Ð° Ð½Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð°" 
                       Foreground="White" FontSize="10"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- ========== BOTTOM CONTROL BAR ========== -->
            <Border Grid.Row="3" Background="#0D1733">
                <Grid Margin="15,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Camera Mode (EO/IR) -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button x:Name="BtnEO" Style="{StaticResource CameraButtonActiveStyle}" 
                                Content="EO" FontWeight="Bold" Click="BtnEO_Click" Margin="0,0,5,0"/>
                        <Button x:Name="BtnIR" Style="{StaticResource CameraButtonStyle}" 
                                Content="IR" FontWeight="Bold" Click="BtnIR_Click"/>
                    </StackPanel>

                    <!-- IR Palette -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                        <TextBlock Text="ÐŸÐ°Ð»Ð¸Ñ‚Ñ€Ð°:" Foreground="#6B7280" FontSize="11" 
                                   VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox x:Name="PaletteComboBox" Width="110" Height="28"
                                  Style="{StaticResource DarkComboBoxStyle}"
                                  SelectionChanged="PaletteComboBox_SelectionChanged">
                            <ComboBoxItem Content="White Hot" IsSelected="True"/>
                            <ComboBoxItem Content="Lava"/>
                            <ComboBoxItem Content="Iron Red"/>
                            <ComboBoxItem Content="Hot Iron"/>
                            <ComboBoxItem Content="Medical"/>
                            <ComboBoxItem Content="Arctic"/>
                            <ComboBoxItem Content="Rainbow 1"/>
                            <ComboBoxItem Content="Rainbow 2"/>
                            <ComboBoxItem Content="Red Trace"/>
                            <ComboBoxItem Content="Black Hot"/>
                        </ComboBox>
                    </StackPanel>

                    


                    <!-- Zoom Controls -->
                    <StackPanel Grid.Column="5" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                        <Button x:Name="BtnZoomOut" Style="{StaticResource CameraButtonStyle}" 
                                Content="ðŸ”-" FontSize="14"
                                PreviewMouseLeftButtonDown="BtnZoomOut_MouseDown" 
                                PreviewMouseLeftButtonUp="BtnZoom_MouseUp"/>
                        <Button x:Name="BtnZoomIn" Style="{StaticResource CameraButtonStyle}" 
                                Content="ðŸ”+" FontSize="14" Margin="5,0,0,0"
                                PreviewMouseLeftButtonDown="BtnZoomIn_MouseDown" 
                                PreviewMouseLeftButtonUp="BtnZoom_MouseUp"/>
                    </StackPanel>

                    <!-- Tracking -->
                    <Button x:Name="BtnTracking" Grid.Column="6" Style="{StaticResource CameraButtonStyle}" 
                            Content="ðŸŽ¯" FontSize="18" ToolTip="Tracking" Click="BtnTracking_Click" Margin="0,0,10,0"/>

                    <!-- Home -->
                    <Button x:Name="BtnHome" Grid.Column="7" Style="{StaticResource CameraButtonStyle}" 
                            Content="ðŸ " FontSize="18" ToolTip="Home Position" Click="BtnHome_Click" Margin="0,0,10,0"/>

                    <!-- Connect Button -->
                    <Button x:Name="BtnConnect" Grid.Column="8" Style="{StaticResource CameraButtonStyle}" 
                            Width="100" Click="BtnConnect_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ”Œ" FontSize="14" Margin="0,0,5,0"/>
                            <TextBlock x:Name="ConnectButtonText" Text="Connect" FontSize="11"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
